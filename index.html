<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text-to-Video Generation Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }
        
        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
        }
        
        .output-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            resize: vertical;
        }
        
        select, input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .btn {
            background: linear-gradient(45deg, #3498db, #2c3e50);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .demo-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .demo-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .demo-btn:hover {
            transform: scale(1.05);
        }
        
        .demo-btn.has-video::after {
            content: 'ðŸ“¹';
            position: absolute;
            top: -5px;
            right: -5px;
            background: #27ae60;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }
        
        .status-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }
        
        .status-queued { border-left-color: #f39c12; }
        .status-processing { border-left-color: #3498db; }
        .status-completed { border-left-color: #27ae60; }
        .status-failed { border-left-color: #e74c3c; }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2c3e50);
            transition: width 0.3s ease;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .metric-item {
            background: #ecf0f1;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .metric-label {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .video-player {
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .alert-error {
            background: #fee;
            border: 1px solid #fcc;
            color: #c66;
        }
        
        .alert-success {
            background: #efe;
            border: 1px solid #cfc;
            color: #6c6;
        }
        
        .alert-info {
            background: #eef;
            border: 1px solid #ccf;
            color: #66c;
        }
        
        .demo-mode-indicator {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            position: absolute;
            top: 20px;
            right: 20px;
            box-shadow: 0 2px 10px rgba(243, 156, 18, 0.3);
        }
        
        .video-info {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .video-info h4 {
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .video-info p {
            color: #7f8c8d;
            font-size: 14px;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .demo-buttons {
                grid-template-columns: 1fr;
            }
            
            .demo-mode-indicator {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 20px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- <div class="demo-mode-indicator">
            DEMO MODE - Pre-generated Videos
        </div> -->
        
        <div class="header">
            <h1>AI Text-to-Video Generator</h1>
            <p>Transform your text into engaging video content with AI</p>
        </div>
        
        <div class="main-content">
            <div class="input-section">
                <h2>Generate Video</h2>
                
                <div class="demo-buttons">
                    <button class="demo-btn has-video" onclick="loadDemo('pib_release')">PIB Release</button>
                    <button class="demo-btn has-video" onclick="loadDemo('health_awareness')">Health Info</button>
                    <button class="demo-btn has-video" onclick="loadDemo('education_content')">Education</button>
                </div>
                
                <form id="videoForm">
                    <div class="form-group">
                        <label for="text">Text Content</label>
                        <textarea id="text" name="text" placeholder="Enter your text content here..." required></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tone">Tone</label>
                            <select id="tone" name="tone">
                                <option value="formal">Formal</option>
                                <option value="casual">Casual</option>
                                <option value="emotional">Emotional</option>
                                <option value="documentary">Documentary</option>
                                <option value="informative">Informative</option>
                                <option value="persuasive">Persuasive</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="domain">Domain</label>
                            <select id="domain" name="domain">
                                <option value="education">Education</option>
                                <option value="health">Health</option>
                                <option value="governance">Governance</option>
                                <option value="entertainment">Entertainment</option>
                                <option value="news">News</option>
                                <option value="corporate">Corporate</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="environment">Environment</label>
                            <select id="environment" name="environment">
                                <option value="studio">Studio</option>
                                <option value="rural">Rural</option>
                                <option value="urban">Urban</option>
                                <option value="futuristic">Futuristic</option>
                                <option value="nature">Nature</option>
                                <option value="indoors">Indoors</option>
                                <option value="classroom">Classroom</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="duration">Duration (seconds)</label>
                            <input type="number" id="duration" name="duration" value="30" min="10" max="120">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="subtitles" name="subtitles" checked> Include Subtitles
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="music" name="music"> Background Music
                            </label>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn" id="generateBtn">View Demo Video</button>
                </form>
            </div>
            
            <div class="output-section">
                <h2>Demo Videos</h2>
                <div id="statusContainer">
                    <div class="alert alert-info">
                        Click on one of the demo buttons above to see a pre-generated video example.
                    </div>
                </div>
                
                <div id="videoContainer" style="display: none;">
                    <div id="videoInfo" class="video-info">
                        <!-- Video info will be populated by JavaScript -->
                    </div>
                    <video id="generatedVideo" class="video-player" controls>
                        Your browser does not support the video tag.
                    </video>
                    <div style="margin-top: 15px;">
                        <button class="btn" id="downloadBtn" onclick="window.open(currentVideoUrl, '_blank')">View Full Video</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentJobId = null;
        let currentVideoUrl = null;
        let pollInterval = null;
        
        // Demo content with video mappings
        const demoContent = {
            pib_release: {
                text: "The Government of India announces the launch of a new digital literacy program aimed at empowering rural communities with technology skills. This initiative will provide free internet access and digital training to over 10,000 villages across the country, ensuring no citizen is left behind in the digital revolution.",
                tone: "formal",
                domain: "governance",
                environment: "rural",
                duration: 25,
                videoUrl: "path/to/pib_release_video.mp4", // Replace with actual video path
                title: "Government Digital Literacy Initiative",
                description: "A formal announcement about government digital literacy program with rural setting and informative tone."
            },
            health_awareness: {
                text: "Regular exercise and a balanced diet are essential for maintaining good health. Walking for 30 minutes daily, eating plenty of fruits and vegetables, and staying hydrated can significantly improve your overall well-being and prevent many diseases.",
                tone: "informative",
                domain: "health",
                environment: "nature",
                duration: 20,
                videoUrl: "path/to/health_awareness_video.mp4", // Replace with actual video path
                title: "Health and Wellness Tips",
                description: "Informative content about healthy lifestyle with natural environment setting."
            },
            education_content: {
                text: "Climate change is one of the most pressing challenges of our time. Rising global temperatures, melting ice caps, and extreme weather events are clear indicators that immediate action is needed to protect our planet for future generations.",
                tone: "documentary",
                domain: "education",
                environment: "nature",
                duration: 30,
                videoUrl: "path/to/education_content_video.mp4", // Replace with actual video path
                title: "Climate Change Awareness",
                description: "Educational documentary-style content about climate change with nature environment."
            }
        };
        
        // Sample video URLs for demo (replace these with your actual video paths)
        const sampleVideos = {
            pib_release: "/outputs/testone.mp4",
            health_awareness: "/outputs/testtwo.mp4",
            education_content: "/outputs/testthree.mp4"
        };
        
        function loadDemo(type) {
            const demo = demoContent[type];
            if (demo) {
                // Populate form fields
                document.getElementById('text').value = demo.text;
                document.getElementById('tone').value = demo.tone;
                document.getElementById('domain').value = demo.domain;
                document.getElementById('environment').value = demo.environment;
                document.getElementById('duration').value = demo.duration;
                
                // Show demo video immediately
                showDemoVideo(type);
                
                // Update button text
                document.getElementById('generateBtn').textContent = 'View Demo Video';
            }
        }
        
        function showDemoVideo(type) {
            const demo = demoContent[type];
            const videoContainer = document.getElementById('videoContainer');
            const video = document.getElementById('generatedVideo');
            const videoInfo = document.getElementById('videoInfo');
            
            // Use sample video for demo (replace with actual video paths)
            currentVideoUrl = sampleVideos[type] || demo.videoUrl;
            video.src = currentVideoUrl;
            
            // Update video info
            videoInfo.innerHTML = `
                <h4>${demo.title}</h4>
                <p><strong>Settings:</strong> ${demo.tone} tone, ${demo.domain} domain, ${demo.environment} environment</p>
                <p><strong>Description:</strong> ${demo.description}</p>
                <p><strong>Duration:</strong> ${demo.duration} seconds</p>
            `;
            
            // Show metrics for demo
            showDemoMetrics();
            
            // Show success status
            showStatus('Demo video loaded successfully! This video was generated with the current form settings.', 'success');
            
            // Show video container
            videoContainer.style.display = 'block';
        }
        
        function showDemoMetrics() {
            const metricsHtml = `
                <div class="metrics-grid">
                    <div class="metric-item">
                        <div class="metric-value">45.2s</div>
                        <div class="metric-label">Generation Time</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">78.5%</div>
                        <div class="metric-label">Memory Usage</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">30fps</div>
                        <div class="metric-label">Frame Rate</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">92.3%</div>
                        <div class="metric-label">Quality Score</div>
                    </div>
                </div>
            `;
            
            document.getElementById('statusContainer').innerHTML += metricsHtml;
        }
        
        function showStatus(message, type = 'info') {
            const statusContainer = document.getElementById('statusContainer');
            statusContainer.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
        }
        
        function showProgress(jobId, status, progress = 0) {
            const statusContainer = document.getElementById('statusContainer');
            const statusClass = `status-${status}`;
            
            statusContainer.innerHTML = `
                <div class="status-card ${statusClass}">
                    <h3>Job ID: ${jobId}</h3>
                    <p>Status: <strong>${status.toUpperCase()}</strong></p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <p><small>Processing your video... This may take a few minutes.</small></p>
                </div>
            `;
        }
        
        async function generateVideo(formData) {
            // In demo mode, just show the demo video
            const selectedDemo = getCurrentDemoType();
            if (selectedDemo) {
                showDemoVideo(selectedDemo);
                return;
            }
            
            // Original API call code (commented out for demo)
            /*
            try {
                const response = await fetch('http://127.0.0.1:5000/api/generate-video', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    currentJobId = data.job_id;
                    showProgress(currentJobId, 'queued', 10);
                    
                    pollInterval = setInterval(() => {
                        pollJobStatus(currentJobId);
                    }, 2000);
                    
                } else {
                    showStatus(`Error: ${data.error}`, 'error');
                    const generateBtn = document.getElementById('generateBtn');
                    generateBtn.disabled = false;
                    generateBtn.textContent = 'Generate Video';
                }
                
            } catch (error) {
                console.error('Error generating video:', error);
                showStatus('Network error. Please check your connection and try again.', 'error');
                const generateBtn = document.getElementById('generateBtn');
                generateBtn.disabled = false;
                generateBtn.textContent = 'Generate Video';
            }
            */
        }
        
        function getCurrentDemoType() {
            const currentText = document.getElementById('text').value;
            for (const [key, demo] of Object.entries(demoContent)) {
                if (demo.text === currentText) {
                    return key;
                }
            }
            return null;
        }
        
        // Form submission handler
        document.getElementById('videoForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const generateBtn = document.getElementById('generateBtn');
            const wasDisabled = generateBtn.disabled;
            
            if (!wasDisabled) {
                generateBtn.disabled = true;
                generateBtn.textContent = 'Loading...';
            }
            
            const formData = {
                text: document.getElementById('text').value,
                tone: document.getElementById('tone').value,
                domain: document.getElementById('domain').value,
                environment: document.getElementById('environment').value,
                duration: parseInt(document.getElementById('duration').value),
                include_subtitles: document.getElementById('subtitles').checked,
                include_background_music: document.getElementById('music').checked
            };
            
            await generateVideo(formData);
            
            if (!wasDisabled) {
                generateBtn.disabled = false;
                generateBtn.textContent = 'View Demo Video';
            }
        });
        
        // Initialize demo
        document.addEventListener('DOMContentLoaded', function() {
            showStatus('Demo Mode Active: Click any demo button to see generated videos!', 'info');
        });
        
        // Clear any existing intervals when page loads
        if (pollInterval) {
            clearInterval(pollInterval);
        }
    </script>
</body>
</html>